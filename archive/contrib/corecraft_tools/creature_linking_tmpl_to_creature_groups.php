<?php/* This script can be used to convert creature_linking_template to Creature Groups */echo "Starting extraction script\n";$assoc_array = array();$mysqli = new mysqli("localhost", "user", "password", "mangos");if ($mysqli->connect_errno){    echo "Connection error: " . $mysqli->connect_errno;    return;}$result = $mysqli->query("SELECT * FROM creature_linking_template");if (!$result){    echo "Query error: " . $mysqli->error;    return;}echo "Found " . $result->num_rows . " rows.\n";while ($row = $result->fetch_object()){    if ($row->flag & 0x03 != 0)    {        $assoc_array[$row->master_entry]['master'] = $row->master_entry;        $assoc_array[$row->master_entry]['map'] = $row->map;        $assoc_array[$row->master_entry]['members'][] = $row->entry;    }}echo "Created " . count($assoc_array) . " groups.\n";$curr_id = 1;$file = fopen("creature_groups.sql", "w+");foreach ($assoc_array as $grp){    $query = "-- Group $curr_id\n";    $query .= "INSERT INTO creature_groups (id, map, name) VALUES($curr_id, {$grp['map']}, \"RenameMe$curr_id\");\n";    $query .= "-- Members\n";    $query .= "INSERT INTO creature_group_members (group_id, creature_guid) VALUES($curr_id, {$grp['master']}); -- Old Master_Entry of this group\n";    fwrite($file, $query);    foreach ($grp['members'] as $member)    {        $inner_query = "INSERT INTO creature_group_members (group_id, creature_guid) VALUES($curr_id, $member);\n";        fwrite($file, $inner_query);    }    fwrite($file, "\n\n");    $curr_id += 1;}fclose($file);?>